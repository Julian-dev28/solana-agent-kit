---
title: 'Helius Integration and Transaction Management'
description: 'Comprehensive system for Solana transaction management, webhooks, and asset tracking using Helius API'
---

A complete system for managing Solana transactions with priority fees, webhook management, and asset tracking using the Helius API. This implementation provides tools for transaction parsing, webhook creation/management, and asset retrieval.

## Core Features

1. **Transaction Management**
   - Priority fee estimation
   - SOL and SPL token transfers
   - Transaction parsing
   - Compute budget optimization

2. **Webhook Management**
   - Webhook creation
   - Webhook retrieval
   - Webhook deletion
   - Account monitoring

3. **Asset Tracking**
   - Asset retrieval by owner
   - Fungible token support
   - Digital Asset Standard (DAS)
   - Pagination handling

## Functions and Tools Overview

1. **Transaction Management**
   - `sendTransactionWithPriorityFee`: Send transactions with priority fees
   - `SolanaSendTransactionWithPriorityFee`: LangChain tool for priority transactions

2. **Asset Management**
   - `getAssetsByOwner`: Fetch assets by wallet address
   - `SolanaGetAllAssetsByOwner`: LangChain tool for asset retrieval

3. **Transaction Parsing**
   - `parseTransaction`: Parse transaction details using Helius API
   - `SolanaParseTransactionHeliusTool`: LangChain tool for transaction parsing

4. **Webhook Management**
   - `create_HeliusWebhook`: Create new webhooks
   - `getHeliusWebhook`: Retrieve webhook information
   - `deleteHeliusWebhook`: Delete existing webhooks
   - `SolanaHeliusWebhookTool`: LangChain tool for webhook creation
   - `SolanaGetHeliusWebhookTool`: LangChain tool for webhook retrieval
   - `SolanaDeleteHeliusWebhookTool`: LangChain tool for webhook deletion

## Usage

### Send Transaction with Priority Fee
```typescript
// Send SOL with priority fee
const result = await sendTransactionWithPriorityFee(
  agent,
  "Medium",
  1.0, // amount in SOL
  new PublicKey("recipient-address")
);

// Send SPL token with priority fee
const result = await sendTransactionWithPriorityFee(
  agent,
  "High",
  100, // token amount
  new PublicKey("recipient-address"),
  new PublicKey("token-mint-address")
);
```

### Get Assets By Owner
```typescript
// Fetch assets for a wallet
const assets = await getAssetsByOwner(
  agent,
  new PublicKey("owner-wallet-address"),
  20 // limit
);

// Using LangChain tool
const assetsTool = new SolanaGetAllAssetsByOwner(agent);
const result = await assetsTool._call(JSON.stringify({
  owner: "wallet-address",
  limit: 20
}));
```

### Parse Transaction
```typescript
// Parse transaction details
const txDetails = await parseTransaction(
  agent,
  "transaction-signature"
);

// Using LangChain tool
const parseTool = new SolanaParseTransactionHeliusTool(agent);
const result = await parseTool._call("transaction-signature");
```

### Create Webhook
```typescript
// Create webhook directly
const webhook = await create_HeliusWebhook(
  agent,
  ["account-address-1", "account-address-2"],
  "https://your-webhook-url.com"
);

// Using LangChain tool
const webhookTool = new SolanaHeliusWebhookTool(agent);
const result = await webhookTool._call(JSON.stringify({
  accountAddresses: ["address1", "address2"],
  webhookURL: "https://webhook-url.com"
}));
```

### Get Webhook
```typescript
// Get webhook details directly
const webhookDetails = await getHeliusWebhook(
  agent,
  "webhook-id"
);

// Using LangChain tool
const getWebhookTool = new SolanaGetHeliusWebhookTool(agent);
const result = await getWebhookTool._call(JSON.stringify({
  webhookID: "webhook-id"
}));
```

### Delete Webhook
```typescript
// Delete webhook directly
const deleteResult = await deleteHeliusWebhook(
  agent,
  "webhook-id"
);

// Using LangChain tool
const deleteWebhookTool = new SolanaDeleteHeliusWebhookTool(agent);
const result = await deleteWebhookTool._call(JSON.stringify({
  webhookID: "webhook-id"
}));
// Create account monitoring webhook
const webhook = await create_HeliusWebhook(
  agent,
  ["account-address-1", "account-address-2"],
  "https://your-webhook-url.com"
);
```

## Data Structures

### Function Responses

### Priority Fee Transaction Response
```typescript
interface PriorityFeeResult {
  transactionId: string;
  fee: number;
}
```

### Asset Response
```typescript
interface AssetResponse {
  status: "success" | "error";
  message: string;
  assets?: any[];
  code?: string;
}
```

### Webhook Responses
```typescript
interface PriorityFeeResponse {
  jsonrpc: string;
  id: string;
  method: string;
  params: [{
    transaction: string;
    options: {
      priorityLevel: string;
    };
  }];
}
```

### Webhook Response
```typescript
interface HeliusWebhookResponse {
  webhookURL: string;
  webhookID: string;
}
```

### Transaction Parse Response
```typescript
interface ParseTransactionResponse {
  status: "success" | "error";
  message: string;
  transaction?: any;
  code?: string;
}
```

## Example Prompts

### Natural Language Prompts
```text
"Send 5 SOL with medium priority to address"

"What's the parsed data for transaction 5UJ..."

"Show me all NFTs owned by wallet address"

"Create a webhook to monitor these addresses"

"Get the webhook details for ID abc123"

"Delete webhook abc123"

"What's the priority fee estimate for my transaction"

"List all assets for this wallet"
"Send 1 SOL with high priority"

"Create webhook for monitoring address"

"Get all NFTs owned by wallet"

"Parse transaction details"

"Delete webhook monitoring"
```

### LangChain Tool Prompts
```text
// Parse transaction
{
  "transactionId": "5UJkAwXC..."
}

// Get assets by owner
{
  "owner": "4Be9CvxqHW6BYiRAxW9Q3xu1ycTMWaL5z8NX4HR3ha7t",
  "limit": 20
}

// Create webhook
{
  "accountAddresses": ["BVdNLvyG2DNiWAXBE9qAmc4MTQXymd5Bzfo9xrQSUzVP"],
  "webhookURL": "https://webhook.site/123"
}

// Get webhook
{
  "webhookID": "1ed4244d-a591-4854-ac31-cc28d40b8255"
}

// Delete webhook
{
  "webhookID": "1ed4244d-a591-4854-ac31-cc28d40b8255"
}

// Send priority transaction
// Send priority transaction
{
  "priorityLevel": "High",
  "amount": 1.0,
  "to": "recipient-address"
}

// Create webhook
{
  "accountAddresses": ["address1", "address2"],
  "webhookURL": "https://webhook-url.com"
}
```

## Implementation Details

### Priority Fee Transaction
```typescript
async function sendTransactionWithPriorityFee(
  agent: SolanaAgentKit,
  priorityLevel: string,
  amount: number,
  to: PublicKey,
  splmintAddress?: PublicKey
): Promise<{ transactionId: string; fee: number }> {
  const transaction = new Transaction();
  // Add priority fee instruction
  // Add transfer instruction
  return sendAndConfirmTransaction(...);
}
```

### Asset Retrieval
```typescript
async function getAssetsByOwner(
  agent: SolanaAgentKit,
  ownerPublicKey: PublicKey,
  limit: number
): Promise<any> {
  const response = await fetch(
    `https://mainnet.helius-rpc.com/?api-key=${apiKey}`,
    {
      method: "POST",
      body: JSON.stringify({
        jsonrpc: "2.0",
        method: "getAssetsByOwner",
        params: {
          ownerAddress: ownerPublicKey.toString(),
          limit: limit
        }
      })
    }
  );
  return response.json();
}
```

## Error Handling

```typescript
try {
  const result = await create_HeliusWebhook(agent, addresses, webhookURL);
} catch (error) {
  if (error.message.includes("API key")) {
    // Handle authentication errors
  } else if (error.message.includes("rate limit")) {
    // Handle rate limiting
  }
}
```

## Best Practices

1. **Transaction Management**
   - Set appropriate priority fees
   - Handle token decimals
   - Validate addresses
   - Confirm transactions

2. **Webhook Management**
   - Validate URLs
   - Monitor webhook status
   - Handle rate limits
   - Secure endpoints

3. **Asset Tracking**
   - Paginate results
   - Cache responses
   - Handle timeouts
   - Validate data

## Common Issues

1. **Transaction Issues**
   - Priority fee too low
   - Insufficient balance
   - Invalid accounts
   - Network congestion

2. **Webhook Issues**
   - Invalid endpoints
   - Rate limiting
   - Missing addresses
   - Authentication errors

3. **Asset Issues**
   - Pagination errors
   - Missing metadata
   - API timeouts
   - Invalid responses

## Response Format

### Success Response
```typescript
{
  status: "success",
  message: "Operation completed successfully",
  data: {
    // Operation-specific data
  }
}
```

### Error Response
```typescript
{
  status: "error",
  message: "Error description",
  code: "ERROR_CODE"
}
```

## Tips for Integration

1. **API Management**
   - Handle rate limits
   - Cache responses
   - Monitor usage
   - Log errors

2. **Transaction Handling**
   - Validate inputs
   - Check balances
   - Set priorities
   - Monitor status

3. **Data Processing**
   - Validate responses
   - Handle timeouts
   - Parse data
   - Cache results

## Common Constants

```typescript
const PRIORITY_LEVELS = {
  NONE: "NONE",
  MIN: "Min",
  LOW: "Low",
  MEDIUM: "Medium",
  HIGH: "High",
  VERY_HIGH: "VeryHigh",
  UNSAFE_MAX: "UnsafeMax"
};

const API_ENDPOINTS = {
  MAINNET: "https://mainnet.helius-rpc.com",
  WEBHOOK: "https://api.helius.xyz/v0/webhooks"
};
```

## Resources

- [Helius API Docs](https://docs.helius.xyz/introduction/overview)
- [Solana Web3.js](https://solana-labs.github.io/solana-web3.js)
- [Digital Asset Standard](https://docs.helius.xyz/compression-and-das-api/digital-asset-standard-das)
- [Priority Fees Guide](https://docs.helius.xyz/solana-rpc-nodes/priority-fees)